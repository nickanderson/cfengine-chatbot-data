I can define classes containing this.promiser and this.handle using
commands promises

:::: captioned-content
::: caption
Example Policy
:::

``` {.cfengine3 include-stdlib="t" log-level="info" exports="both" extra-opts="--show-evaluated-classes=command_" command-in-result="t" tangle="/tmp/commands-promise-classes-containing-this-promiser-and-this-handle.cf"}
bundle agent __main__
{
  vars:

    "something" string => "in a var";

  commands:  
      "/bin/echo Test Commands 0" 
        handle => "command_0_static_promiser_static_handle",  
        classes => results( "namespace", "command_0_/bin/echo Test Commands 0_command_0_static_promiser_static_handle" );


      "/bin/echo Test Commands 1" 
        handle => "command_1_static_promiser_static_handle",  
        classes => results( "namespace", "command_1_$(this.promiser)_$(this.handle)" );

      "/bin/echo Test Commands 2 $(something)" 
        handle => "command_2_dynamic_promiser_dynamic_handle_$(something)",  
        classes => results( "namespace", "command_2_$(this.promiser)_$(this.handle)" );


}
```
::::

``` example
# cf-agent --no-lock --log-level info --show-evaluated-classes=command_ --file /tmp/commands-promise-classes-containing-this-promiser-and-this-handle.cf
    info: Executing 'no timeout' ... '/bin/echo Test Commands 0'
  notice: Q: ".../bin/echo Test ": Test Commands 0
    info: Last 1 quoted lines were generated by promiser '/bin/echo Test Commands 0'
    info: Completed execution of '/bin/echo Test Commands 0'
    info: Executing 'no timeout' ... '/bin/echo Test Commands 1'
  notice: Q: ".../bin/echo Test ": Test Commands 1
    info: Last 1 quoted lines were generated by promiser '/bin/echo Test Commands 1'
    info: Completed execution of '/bin/echo Test Commands 1'
    info: Executing 'no timeout' ... '/bin/echo Test Commands 2 in a var'
  notice: Q: ".../bin/echo Test ": Test Commands 2 in a var
    info: Last 1 quoted lines were generated by promiser '/bin/echo Test Commands 2 in a var'
    info: Completed execution of '/bin/echo Test Commands 2 in a var'
Class name                                                   Meta tags                               
command_0__bin_echo_Test_Commands_0_command_0_static_promiser_static_handle_reached                                         
command_0__bin_echo_Test_Commands_0_command_0_static_promiser_static_handle_repaired                                         
command_1__bin_echo_Test_Commands_1_command_1_static_promiser_static_handle_reached                                         
command_1__bin_echo_Test_Commands_1_command_1_static_promiser_static_handle_repaired                                         
command_2__bin_echo_Test_Commands_2_in_a_var_command_2_dynamic_promiser_dynamic_handle_in_a_var_reached                                         
command_2__bin_echo_Test_Commands_2_in_a_var_command_2_dynamic_promiser_dynamic_handle_in_a_var_repaired                                         
```

**References:** [CFEngine
Examples](id:38277465-771a-4db4-983a-8dfd434b1aff)
